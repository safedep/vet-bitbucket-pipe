name: SafeDep Vet Pipe
image: ghcr.io/safedep/vet-bitbucket-pipe:v1.2.0
description: SafeDep Vet Pipe for policy driven vetting of open source dependencies.
category: Security
repository: https://bitbucket.org/safedep/vet-pipe
vendor:
  name: SafeDep
  website: https://safedep.io
  email: support@safedep.io
maintainer:
  name: SafeDep
  website: https://safedep.io
tags:
  - SafeDep
  - Vet
  - Malware
  - Vulnerability

spec:
  variables:
    - name: POLICY
      description: Path to a policy file.

    # TODO: we are using `vet` as base image, but to make
    # vet version dynamic, we have to download specific version
    # in more generic base image like alpine / ubuntu
    #
    # Hence choosing vet version is not dynamic yet, its hardcoded
    #
    # - name: VET_VERSION
    #   type: string
    #   description: The version of vet to use for the scan.
    #   default: latest

    - name: CLOUD
      description: Whether to synchronize the report with the SafeDep cloud.

    - name: CLOUD_KEY
      description: The API key to use for synchronizing the report with the SafeDep cloud.

    - name: CLOUD_TENANT
      description: The tenant ID to use for synchronizing the report with the SafeDep cloud.

    - name: EXCEPTION_FILE
      description: Path to an exception file.

    - name: TRUSTED_REGISTRIES
      description: A comma-separated list of trusted registry base URLs.

    - name: TIMEOUT
      description: Timeout in seconds for vet to wait for external service results to be available.
      default: "300"

    - name: SKIP_FILTER_CI_FAIL
      description: Skip policy violation --filter-fail and allow CI to pass on any policy violation.
